(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{19031:(e,r,s)=>{"use strict";s.d(r,{Result:()=>a.Ay});var a=s(63173)},19178:(e,r,s)=>{"use strict";s.d(r,{default:()=>b});var a=s(66384),l=s(27131),t=s(15590),n=s(95957),i=s(95873),o=s(725),d=s(74680),u=s(47507),c=s(60448),m=s(14569),p=s(47134),h=s(16636),v=s(55836);let A=(0,v.createServerReference)("4092d61064b5e56b6a097920fe07164603cd949f73",v.callServer,void 0,v.findSourceMapURL,"default"),f=[{value:"USER",label:"مستخدم"},{value:"EDITOR",label:"محرر"},{value:"ADMIN",label:"مشرف"}],b=()=>{let{notification:e,message:r}=l.A.useApp(),[s]=(0,c.A)(),[v,b]=(0,h.useState)(!1),g=async a=>{b(!0);try{await A({email:a.email,password:a.password,role:a.role}),s.resetFields(),b(!1),r.success("Created!")}catch(s){var l,t,n;b(!1);let r="Error, failed to create";"P2002"===s.code?r="email must be unique":"ZodError"===s.name?(console.error("json:: ",JSON.parse(s.message)),r=(null==(t=JSON.parse(s.message))||null==(l=t[0])?void 0:l.message)||"invalid input"):r=null==(n=s.toString)?void 0:n.call(s),e.error({message:r,showProgress:!0,pauseOnHover:!0,placement:"bottomLeft"})}};return(0,a.jsxs)(t.A,{form:s,onFinish:g,labelCol:{span:6},wrapperCol:{span:12},style:{width:"100%",maxWidth:500,alignSelf:"center"},autoComplete:"off",requiredMark:!1,children:[(0,a.jsx)(m.A,{name:"email",label:"البريد الالكتروني",rules:[{required:!0,message:"Please enter email!"}],children:(0,a.jsx)(n.A,{})}),(0,a.jsx)(m.A,{name:"password",label:"كلمة المرور",rules:[{required:!0,message:"Please enter password!"},{min:8,message:"minimum length is 8 characters"}],children:(0,a.jsx)(p.A,{})}),(0,a.jsx)(m.A,{name:"role",label:"الصلاحية",rules:[{required:!0,message:"Please select role!"}],children:(0,a.jsx)(i.A,{options:f})}),(0,a.jsx)(o.A,{justify:"end",style:{paddingRight:"4rem"},children:(0,a.jsxs)(d.A,{children:[(0,a.jsx)(u.Ay,{type:"primary",htmlType:"submit",loading:v,children:"إنشاء"}),(0,a.jsx)(u.Ay,{htmlType:"reset",children:"مسح"})]})})]})}},62141:e=>{e.exports={main:"Users_main__1yCsH",formContainer:"Users_formContainer__Rwe5V",listContainer:"Users_listContainer__zKPkp",textLink:"Users_textLink__Nk3uj"}},63854:(e,r,s)=>{Promise.resolve().then(s.bind(s,19031)),Promise.resolve().then(s.bind(s,19178)),Promise.resolve().then(s.bind(s,71124)),Promise.resolve().then(s.t.bind(s,62141,23)),Promise.resolve().then(s.bind(s,61270))},71124:(e,r,s)=>{"use strict";s.d(r,{default:()=>f});var a=s(66384),l=s(27131),t=s(47507),n=s(75531),i=s(91927),o=s(8481),d=s(61552),u=s(93782),c=s(24582),m=s(53947);s(16636);var p=s(55836);let h=(0,p.createServerReference)("40e39e9e7f978e8bd5c1375f0f8436b5ed0f064986",p.callServer,void 0,p.findSourceMapURL,"default"),v={USER:"مستخدم",EDITOR:"محرر",ADMIN:"مشرف"},A=e=>{let{id:r,email:s,disabled:n}=e,{modal:i,notification:o}=l.A.useApp(),d=async()=>{i.warning({closable:!0,maskClosable:!0,title:"Delete user",content:"Are you sure to delete user with email ".concat(s,"?"),onOk:async()=>{try{await h({id:r})}catch(r){var e;o.error({message:null==(e=r.toString)?void 0:e.call(r),showProgress:!0,pauseOnHover:!0,placement:"bottomLeft"})}},okButtonProps:{danger:!0}})};return(0,a.jsx)(t.Ay,{type:"link",danger:!0,onClick:d,disabled:n,children:"حذف"})},f=e=>{let{users:r,count:s}=e,l=(0,u.wV)(),t=(0,c.useRouter)(),[p,h]=(0,m.ZA)("page",m.GJ);return(0,a.jsx)(n.A,{avatar:!0,loading:!1,active:!0,children:(0,a.jsx)(i.A,{itemLayout:"horizontal",dataSource:r,pagination:{pageSize:10,total:0===r.length?s+1:s,current:null!=p?p:1,onChange:async(e,r)=>{await h(e),t.refresh()}},rowKey:e=>e.id,renderItem:e=>{var r,s;return(0,a.jsx)(i.A.Item,{actions:[(0,a.jsx)(A,{id:e.id,email:e.username,disabled:e.id===(null==(s=l.data)||null==(r=s.user)?void 0:r.id)},e.id)],children:(0,a.jsx)(i.A.Item.Meta,{avatar:(0,a.jsx)(o.A,{children:(0,a.jsx)(d.A,{})}),title:e.username,description:v[e.role]})})}})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[830,822,879,497,269,988,131,270,525,173,240,544,782,309,951,358],()=>r(63854)),_N_E=e.O()}]);