(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[815],{16944:(e,t,r)=>{"use strict";r.d(t,{default:()=>A});var a=r(66384),l=r(27131),i=r(15590),s=r(95957),n=r(51531),o=r(12486),d=r(47507),c=r(725),m=r(74680),h=r(60448),u=r(14569),p=r(16636),x=r(55836);let f=(0,x.createServerReference)("40f507b24a3f7faf56326c1d347ccbf90955266000",x.callServer,void 0,x.findSourceMapURL,"default");var v=r(42947);let A=e=>{let{callback:t,...r}=e,{notification:x,message:A}=l.A.useApp(),[j]=(0,h.A)(),[b,g]=(0,p.useState)(),[y,N]=(0,p.useState)(!1),w=async e=>{var r,a,l,i;let{prefix:s,firstName:n,middleName:o,lastName:d,overview:c,birthDate:m,deathDate:h}=v.r.parse({...e,birthDate:e.birthDate.get("year").toString(),deathDate:null==(r=e.deathDate)?void 0:r.get("year").toString()});if(N(!0),b&&(null==b?void 0:b.size)>1048576)return j.setFields([{name:"photo",errors:["حجم الصورة يجب أن يكون أقل من 1MB"]}]),N(!1),!1;try{let e=await f({prefix:s,firstName:n,middleName:o,lastName:d,overview:c,birthDate:m,deathDate:h,photo:b});if(null==e?void 0:e.error)throw e.error;j.resetFields(),N(!1),A.success("Created!"),g(void 0),null==t||t()}catch(t){let e;N(!1),"ZodError"===t.name?(console.error("json:: ",JSON.parse(t.message)),e=(null==(l=JSON.parse(t.message))||null==(a=l[0])?void 0:a.message)||"invalid input"):e=null==(i=t.toString)?void 0:i.call(t),x.error({message:e,showProgress:!0,pauseOnHover:!0,placement:"bottomLeft"})}};return(0,a.jsxs)(i.A,{form:j,onFinish:w,onReset:()=>{j.resetFields(),g(void 0)},labelCol:{span:6},wrapperCol:{span:12},style:{width:"100%",maxWidth:500,alignSelf:"center"},autoComplete:"off",dir:"rtl",...r,children:[(0,a.jsx)(u.A,{name:"prefix",label:"اللقب",children:(0,a.jsx)(s.A,{})}),(0,a.jsx)(u.A,{name:"firstName",label:"الاسم",rules:[{required:!0}],children:(0,a.jsx)(s.A,{})}),(0,a.jsx)(u.A,{name:"middleName",label:"الاسم الأوسط",children:(0,a.jsx)(s.A,{})}),(0,a.jsx)(u.A,{name:"lastName",label:"الكنية",rules:[{required:!0}],children:(0,a.jsx)(s.A,{})}),(0,a.jsx)(u.A,{name:"overview",label:"لمحة عن المؤلف",children:(0,a.jsx)(s.A,{})}),(0,a.jsx)(u.A,{name:"birthDate",label:"تاريخ الميلاد",rules:[{required:!0,message:"Please select date"}],children:(0,a.jsx)(n.A,{picker:"year"})}),(0,a.jsx)(u.A,{name:"deathDate",label:"تاريخ الوفاة",children:(0,a.jsx)(n.A,{picker:"year"})}),(0,a.jsx)(i.A.Item,{name:"photo",label:"صورة المؤلف",valuePropName:"",children:(0,a.jsx)(o.A,{listType:"picture-card",accept:"image/*",maxCount:1,beforeUpload:e=>(g(e),!1),children:(0,a.jsx)(d.Ay,{children:"Upload"})})}),(0,a.jsx)(c.A,{justify:"end",style:{paddingRight:"4rem"},children:(0,a.jsxs)(m.A,{children:[(0,a.jsx)(d.Ay,{type:"primary",htmlType:"submit",loading:y,children:"إنشاء"}),(0,a.jsx)(d.Ay,{htmlType:"reset",children:"مسح"})]})})]})}},19031:(e,t,r)=>{"use strict";r.d(t,{Result:()=>a.Ay});var a=r(63173)},42947:(e,t,r)=>{"use strict";r.d(t,{r:()=>l});var a=r(77548);let l=a.z.object({prefix:a.z.string().trim().optional().default(""),firstName:a.z.string().trim(),middleName:a.z.string().trim().optional().default(""),lastName:a.z.string().trim(),overview:a.z.string().trim().optional().default(""),birthDate:a.z.string().trim(),deathDate:a.z.string().trim().optional(),photo:a.z.any().nullable().optional()}).strict();a.z.object({id:a.z.coerce.number().int(),prefix:a.z.string().trim().optional().default(""),firstName:a.z.string().trim(),middleName:a.z.string().trim().optional().default(""),lastName:a.z.string().trim(),overview:a.z.string().trim().optional().default(""),birthDate:a.z.string().trim(),deathDate:a.z.string().trim().optional().nullable(),photoUrl:a.z.any().nullable().optional()}).strict()},62141:e=>{e.exports={main:"Users_main__1yCsH",formContainer:"Users_formContainer__Rwe5V",listContainer:"Users_listContainer__zKPkp",textLink:"Users_textLink__Nk3uj"}},71678:(e,t,r)=>{"use strict";r.d(t,{default:()=>P});var a=r(66384),l=r(27131),i=r(47507),s=r(91927),n=r(8481),o=r(68084),d=r(42402),c=r.n(d),m=r(57083),h=r(27533),u=r(61552),p=r(24582),x=r(53947),f=r(16636),v=r(55836);let A=(0,v.createServerReference)("40f2cc572942f3e19dd8988e85b3d2d90542b09e31",v.callServer,void 0,v.findSourceMapURL,"default");var j=r(15590),b=r(95957),g=r(51531),y=r(57311),N=r(12486),w=r(725),D=r(74680),S=r(60448),z=r(14569);let C=(0,v.createServerReference)("4071d474cafc64d5dea44c354ad39c13e38c56d7b2",v.callServer,void 0,v.findSourceMapURL,"default");var k=r(42947);let U=e=>{let{initialValues:t,callback:r,...s}=e,{notification:n,message:o}=l.A.useApp(),[d]=(0,S.A)(),[c,m]=(0,f.useState)(!1),[h,u]=(0,f.useState)(null),[p,x]=(0,f.useState)(!1),v=async e=>{var a,l,i,s;let c,{prefix:u,firstName:x,middleName:f,lastName:v,overview:A,birthDate:j,deathDate:b}=k.r.parse({...e,birthDate:e.birthDate.get("year").toString(),deathDate:null==(a=e.deathDate)?void 0:a.get("year").toString()});m(!0),null===h?c=null:p&&h&&(c=h);try{let e=await C({id:t.id,prefix:u,firstName:x,middleName:f,lastName:v,overview:A,birthDate:j,deathDate:b,photo:c});if(null==e?void 0:e.error)throw e.error;d.resetFields(),m(!1),o.success("Updated!"),null==r||r()}catch(t){let e;m(!1),"ZodError"===t.name?(console.error("json:: ",JSON.parse(t.message)),e=(null==(i=JSON.parse(t.message))||null==(l=i[0])?void 0:l.message)||"invalid input"):e=null==(s=t.toString)?void 0:s.call(t),n.error({message:e,showProgress:!0,pauseOnHover:!0,placement:"bottomLeft"})}};return(0,a.jsxs)(j.A,{form:d,onFinish:v,onReset:()=>{d.resetFields(),u(null),x(!1)},labelCol:{span:6},wrapperCol:{span:12},style:{width:"100%",maxWidth:500,alignSelf:"center"},autoComplete:"off",dir:"rtl",initialValues:t,...s,children:[(0,a.jsx)(z.A,{name:"prefix",label:"اللقب",children:(0,a.jsx)(b.A,{})}),(0,a.jsx)(z.A,{name:"firstName",label:"الاسم",rules:[{required:!0}],children:(0,a.jsx)(b.A,{})}),(0,a.jsx)(z.A,{name:"middleName",label:"الاسم الأوسط",children:(0,a.jsx)(b.A,{})}),(0,a.jsx)(z.A,{name:"lastName",label:"الكنية",rules:[{required:!0}],children:(0,a.jsx)(b.A,{})}),(0,a.jsx)(z.A,{name:"overview",label:"لمحة عن المؤلف",children:(0,a.jsx)(b.A,{})}),(0,a.jsx)(z.A,{name:"birthDate",label:"تاريخ الميلاد",rules:[{required:!0,message:"Please select date"}],children:(0,a.jsx)(g.A,{picker:"year"})}),(0,a.jsx)(z.A,{name:"deathDate",label:"تاريخ الوفاة",children:(0,a.jsx)(g.A,{picker:"year"})}),(0,a.jsx)(j.A.Item,{label:"صورة المؤلف",children:t.photoUrl&&!h&&(0,a.jsx)(y.A,{src:t.photoUrl,width:200})}),(0,a.jsx)(j.A.Item,{name:"photo",label:"تغيير صورة المؤلف",valuePropName:"",children:(0,a.jsx)(N.A,{listType:"picture-card",accept:"image/*",maxCount:1,showUploadList:!!h,beforeUpload:e=>(u(e),x(!0),!1),onRemove:()=>(u(null),x(!0),!0),children:!h&&(0,a.jsx)(i.Ay,{children:"Upload"})})}),(0,a.jsx)(w.A,{justify:"end",style:{paddingRight:"4rem"},children:(0,a.jsxs)(D.A,{children:[(0,a.jsx)(i.Ay,{type:"primary",htmlType:"submit",loading:c,children:"تعديل"}),(0,a.jsx)(i.Ay,{htmlType:"reset",children:"مسح"})]})})]})},_=e=>{let{id:t,name:r,disabled:s}=e,{modal:n,notification:o}=l.A.useApp(),d=async()=>{n.warning({closable:!0,maskClosable:!0,direction:"rtl",title:"حذف المؤلف ".concat(r),onOk:async()=>{try{await A({id:t})}catch(t){var e;o.error({message:null==(e=t.toString)?void 0:e.call(t),showProgress:!0,pauseOnHover:!0,placement:"bottomLeft"})}},okText:"تأكيد",okButtonProps:{danger:!0}})};return(0,a.jsx)(i.Ay,{type:"link",danger:!0,onClick:d,disabled:s,children:(0,a.jsx)(m.A,{size:16})})},P=e=>{let{authors:t,count:r}=e,{modal:l}=(0,o.A)(),d=(0,p.useRouter)(),[m,f]=(0,x.ZA)("page",x.GJ.withDefault(1)),v=e=>{var t,r,i,s;let{destroy:n}=l.info({width:600,destroyOnClose:!0,closable:!0,maskClosable:!0,title:"ID ".concat(e.id),content:(0,a.jsx)(U,{initialValues:{id:e.id,prefix:null!=(t=e.prefix)?t:void 0,firstName:e.firstName,middleName:null!=(r=e.middleName)?r:void 0,lastName:e.lastName,photoUrl:null!=(i=e.photoUrl)?i:void 0,birthDate:c()(e.birthDate),deathDate:e.deathDate?c()(e.deathDate):void 0,overview:null!=(s=e.overview)?s:void 0},callback:()=>n()}),footer:null,style:{marginTop:-70}})};return(0,a.jsx)(s.A,{itemLayout:"horizontal",dataSource:t,pagination:{pageSize:10,total:0===t.length?r+1:r,current:m,onChange:async(e,t)=>{await f(e),d.refresh()}},rowKey:e=>e.id,renderItem:e=>(0,a.jsx)(s.A.Item,{actions:[(0,a.jsx)(i.Ay,{onClick:()=>v(e),type:"link",children:(0,a.jsx)(h.A,{size:16})},"edit_".concat(e.id)),(0,a.jsx)(_,{id:e.id,name:"".concat(e.firstName," ").concat(e.middleName," ").concat(e.lastName)},e.id)],children:(0,a.jsx)(s.A.Item.Meta,{avatar:(0,a.jsx)(n.A,{size:50,src:e.photoUrl,children:(0,a.jsx)(u.A,{})}),title:"".concat(e.prefix," ").concat(e.firstName," ").concat(e.middleName," ").concat(e.lastName),description:"(".concat(e.birthDate).concat(e.deathDate?" - ".concat(e.deathDate):"",") ").concat(e.overview)})})})}},78801:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(66384),l=r(65055),i=r(24582),s=r(53947);let n=()=>{let e=(0,i.useRouter)(),[t,r]=(0,s.ZA)("q"),n=async t=>{t.trim()?await r(t.trim()):await r(null),e.refresh()},o=async()=>{await r(null),e.refresh()};return(0,a.jsx)(l.A,{placeholder:"بحث ...",onSearch:n,allowClear:!0,onClear:o})}},94619:(e,t,r)=>{Promise.resolve().then(r.bind(r,19031)),Promise.resolve().then(r.bind(r,71678)),Promise.resolve().then(r.bind(r,16944)),Promise.resolve().then(r.bind(r,78801)),Promise.resolve().then(r.t.bind(r,62141,23)),Promise.resolve().then(r.bind(r,61270))}},e=>{var t=t=>e(e.s=t);e.O(0,[830,822,879,497,269,988,131,270,525,173,240,433,544,93,309,951,358],()=>t(94619)),_N_E=e.O()}]);